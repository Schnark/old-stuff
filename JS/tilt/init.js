/*global menu, game*/
(function () {
"use strict";

var maxTrigger, lastTime, msgIntro = [
		'Welcome!',
		'Just follow the way.',
		'Collect coins for points.',
		'Cross the slopes.',
		'Cross the sand, don’t fall into the abyss.',
		'Cross the water quickly!',
		'Use these items to heal.',
		'Beware of the ghost.',
		'See that the door opened.',
		'And it closed again.',
		'Rest on the red spot.'
	], msgTower = [
		'3 coins in total and 1 ghost per minute',
		'',
		'The west chamber is safe.',
		'Congratulations! Don’t be greedy, don’t enter the chambers!',
		'Didn’t I tell you not to enter the chambers?',
		'Didn’t I tell you not to enter the chambers?'
	];

menu.init([{
	t: 'Intro',
	l: 0,
	p: 0,
	m: 3,
	s:
		'_#############################\n' +
		'_#     3 >>   vvv  << 4 ....-#\n' +
		'_#   $ 3 >>   ^^^  << 4 .....#\n' +
		'_#  #####################    #\n' +
		'_#  #                   #5555#\n' +
		'_# $#                   #    #\n' +
		'_#22#     ##########    #~~~~#\n' +
		'_#  #     #   v    #    #~~~~#\n' +
		'_#  #99999#  >%<   #    #~~~~#\n' +
		'_#  #     #   ^    #    #~~~~#\n' +
		'_#  ###+###        #    #6666#\n' +
		'_#  #     #   #    #    # *  #\n' +
		'_#  #88888#AA###AAA#    #    #\n' +
		'_#  #     #   #    #    #  * #\n' +
		'_#  #     #        #    #    #\n' +
		'_#  #     #        #    # *  #\n' +
		'_#  #     #             #    #\n' +
		'_#11#     ###############  * #\n' +
		'_#  #              7$        #\n' +
		'_#@ #              7         #\n' +
		'_#############################',
	c: function (trigger, time) {
		if (time === -1) {
			maxTrigger = -1;
		}
		if (trigger > maxTrigger) {
			maxTrigger = trigger;
			game.setMessage(msgIntro[trigger]);
			if (trigger === 7) {
				game.releaseGhost(2, 2);
			}
			if (trigger === 8) {
				game.openDoor(0);
			}
			if (trigger === 9) {
				game.closeDoor(0);
			}
		}
	}
},{
	t: 'Haunted tower',
	l: 1,
	p: 1,
	m: 3,
	s:
		'#########################################################\n' +
		'#@ #  #                                     #  #     #  #\n' +
		'#  #  #                                     #  #     #  #\n' +
		'#  #  #  #################################  #  #  #  #  #\n' +
		'#  #  #  #                               #  #  #  #  #  #\n' +
		'#  #  #  #                               #  #  #  #  #  #\n' +
		'#  #  #  #  ######  ###################  #  #  #  #  #  #\n' +
		'#  #  #  #  #                         #  #  #  #  #  #  #\n' +
		'#  #  #  #  #                         #  # $#  #  #  #  #\n' +
		'#11#  #  #  #   ####################  #  ####  #  #  #  #\n' +
		'#  #     #  #   #                  #  #        #  #  #  #\n' +
		'#  #     #  #   #                  #  #        #  #  #  #\n' +
		'#  #  #  #  #   #  ##############  #  #  ####  #  #  #  #\n' +
		'#  #  #  #  #   #               #  #  #  #     #  #  #  #\n' +
		'#  #  #  #  #   #               #  #  #  #  ####  #  #  #\n' +
		'#  #  #  #  #   #  #####3#####  #  #  #  #  #  #  #  #  #\n' +
		'#  #  #  #  #   #  #         #  #  #  #  #  #  #  #  #  #\n' +
		'#  #  #  #  #   #  #         #  #  #$ #  #* #  #  #  #  #\n' +
		'#  #  #  #  #   #  #         #  #  ####  ####  #  #  #  #\n' +
		'#  #  #  #  #   ####         ####              #  #  #  #\n' +
		'#  #  #  #  #   #$      %    +4$#              #  #  #  #\n' +
		'#  #  #  #  ########         ####  ####  ####  ####  #  #\n' +
		'#  #  #  #         #         #  #  #  #  #  #  # *#  #  #\n' +
		'#  #  #  #         #         #  #  #  #  #  #  #  #  #  #\n' +
		'#  #  ####   ####  #         #  #  #  #  #  #  #  #  #  #\n' +
		'#  #  # *#   #* #  #####+#####  #  #  #  #  #  #  #  #  #\n' +
		'#  #  #  #   #  #      #5#            #  #  #  #  #  #  #\n' +
		'#  #  #  #   #  #      #$#            #  #  #  #  #  #  #\n' +
		'#  #  #  #   #  ####################  #  #  #  #  #  #  #\n' +
		'#     #  #   #                        #  #  #  #     #  #\n' +
		'#     #  #   #                        #  #  #  #     #  #\n' +
		'#  #  #  #   ##########################  #  #  #  #  #  #\n' +
		'#  #  #  #                      #        #     #  #  #  #\n' +
		'#  #  #  #                      #        #     #  #  #  #\n' +
		'#  #  #  ##############  #######################  #  #  #\n' +
		'#  #  #                                           #  #  #\n' +
		'#  #  #                                           #  #  #\n' +
		'#  #  #############################################  #  #\n' +
		'#  #         #       2                               #  #\n' +
		'#  #         #       2                               #  #\n' +
		'#  ####################################  #############  #\n' +
		'#                                                       #\n' +
		'#                                                       #\n' +
		'#########################################################',
	c: function (trigger, time) {
		if (time === -1) {
			maxTrigger = -1;
			lastTime = time;
			game.openDoor(0, true);
			game.openDoor(1, true);
			game.releaseGhost(40 * Math.random(), 40 * Math.random());
		}
		if (trigger > maxTrigger) {
			maxTrigger = trigger;
			game.setMessage(msgTower[trigger]);
			if (trigger === 4 || trigger === 5) {
				game.closeDoor(trigger - 4);
				game.releaseGhost(23.5, 19.5);
				game.releaseGhost(25.5, 19.5);
				game.releaseGhost(23.5, 21.5);
				game.releaseGhost(25.5, 21.5);
			}
		}
		if (time - lastTime > 60) {
			game.releaseGhost(40 * Math.random(), 40 * Math.random());
			lastTime = time;
		}
	}
}, {
	t: 'Dark ride',
	l: 1,
	p: 2,
	m: 0,
	s:
		'-------------------------------------------------------------------------------------------------------------\n' +
		'-....vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv...----------------------------------------------------------\n' +
		'-.@ >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> .----------------------------------------------------------\n' +
		'-....^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^.v.-----------------------  -----------------------.---------\n' +
		'------------------------------------------------>v<------------. <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< ---------\n' +
		'------------------------------------------------>v<-------------v--------------------  ------------^---------\n' +
		'------------------------------------------------>v<-------------v----------------------------------^---------\n' +
		'------------------------------------------------>v<-------------v----------------------------------^ --------\n' +
		'------------------------------------------------>v<-------------v-------- <<<<<<<<<<<<<<<< --------^ --------\n' +
		'------------------------------------------------>v<-------------v -------v----------------^--------^---------\n' +
		'-------------------------...vvvvvvvvvvvvvvvvvvvv.v.-------------v--------v----------------^--------^---------\n' +
		'-------------------------. <<<<<<<<<<<<<<<<<<<<<< .-------------v--------v----------------^--------^---------\n' +
		'-------------------------.v.^^^^^^^^^^^^^^^^^^^^...-------------v--------v--------- v ----^--------^---------\n' +
		'------------------------->v<------------------------------------v--------v--------->%<----^--------^---------\n' +
		'-------------------------.v.vvvvvvvvvvvvvv..--------------------v--------v--------- ^ ----^------- ^---------\n' +
		'-------------------------. >>>>>>>>>>>>>>> .--------------------v--------v----------^-----^------- ^---------\n' +
		'-------------------------...^^^^^^^^^^^^^ v ------------------- v--------v----------^-----^--------^---------\n' +
		'----------------------------------------- v --------------------v--------v----------^-----^--------^---------\n' +
		'----------------------------------------- v --------------------v-------- >>>>>>>>>> -----^--------^---------\n' +
		'----------------------------------------- v --------------------v-------------------------^--------^---------\n' +
		'----------------------------------------- v --------------------v-------------------------^--------^---------\n' +
		'----------------------------------------- v --------------------v----------- -------------^--------^---------\n' +
		'---..     ..----------------------------- v -------------------- >>>>>>>>>>>>>>>>>>>>>>>>> .-------^---------\n' +
		'---. <<<<< .----------------------------- v --------------------.------------------- --------------^---------\n' +
		'--- v     ^ ----------------------------- v -------------------------------------------------------^---------\n' +
		'--- v --- ^ ----------------------------- v -------------------------------------------------------^---------\n' +
		'--- v --- ^ ----------------------------- v -------------..------  --------------------------------^---------\n' +
		'--- v --- ^ ----------------------------- v ------------- >>>>>>>>>>>>>>>>>>> ---------------------^---------\n' +
		'--- v --- ^ ----------------------------- v -------------^  ---------------  v.--------------------^---------\n' +
		'--- v --- ^ ----------------------------- v -------------^ ------------------v.--------------------^---------\n' +
		'--- v --- ^ ----------------------------- v -------------^ ------------------v---------------------^ --------\n' +
		'--- v --- ^ ----------------------------- v -------------^-------------------v---------------------^ --------\n' +
		'--- v --- ^ ----------------------------- v -------------^-------------------v---------------------^---------\n' +
		'--- v --- ^ ----------------------------- v -------------^-------------------v---------------------^---------\n' +
		'--- v --- ^ ----------------------------- v -------------^------------------ v---------------------^---------\n' +
		'--- v --- ^ ----------------------------- v -------------^------------------ v---------------------^---------\n' +
		'--- v --- ^ ----------------------------- v ------------ ^-------------------v---------------------^---------\n' +
		'--- v --- ^ ----------------------------- v ------------ ^-------------------v---------------------^---------\n' +
		'--- v --- ^ ----------------------------- v ------------ ^-------------------v---------------------^---------\n' +
		'--- v --- ^ ----------------------------- v -------------^-------------------v---------------------^---------\n' +
		'--- v --- ^ ----------------------------- v -------------^-------------------v---------------------^---------\n' +
		'--- v --- ^ ----------------------------- v -------------^-------------------v---------------------^---------\n' +
		'--- v --- ^                               v -------------^-------------------v-------------------- ^---------\n' +
		'--- v ---. <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< .-------------^ ------------------v ------------------- ^---------\n' +
		'--- v ---..                               ..-------------^ ------------------v --------------------^---------\n' +
		'--- v ---------------------------------------------------^ ------------------v---------------------^---------\n' +
		'--- v ---------------------------------------------------^-------------------v---------------------^---------\n' +
		'--- v ---------------------------------------------------^-------------------v---------------------^---------\n' +
		'--- v -------------------------------------------------- ^-------------------v---------------------^---------\n' +
		'--- v -------------------------------------------------- ^-------------------v---------------------^---------\n' +
		'--- v                                              ----- ^.------------------v-------  ------------^.--------\n' +
		'---. >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> .------------------ >>>>>>>>>>>>>>>>>>>>> .--------\n' +
		'---..                                              --------------------------..--------------  --------------\n' +
		'-------------------------------------------------------------------------------------------------------------\n' +
		'-------------------------------------------------------------------------------------------------------------',
	c: function (trigger, time) {
		if (time === -1) {
			game.setMessage('');
		}
	}
}]);

document.getElementById('start').onclick = menu.start;
document.getElementById('reset').onclick = menu.reset;

})();